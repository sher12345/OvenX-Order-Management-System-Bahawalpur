<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#8b0000">
    <link rel="manifest" href='data:application/manifest+json,{"name":"Oven X Official","short_name":"OvenX","start_url":".","display":"standalone","background_color":"#8b0000","theme_color":"#8b0000","icons":[{"src":"https://cdn-icons-png.flaticon.com/512/5973/5973307.png","sizes":"512x512","type":"image/png","purpose":"any"}]}'>

    <title>Oven X - Official Order System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="secret-pwa-button" onclick="handleSecretClick()"></div>

<div id="gateway-screen">
    <div class="bouncing-logo"><p class="gateway-logo">OVEN <span>X</span></p></div>
    <div id="gateway-table-note">ğŸ‰ WELCOME! TABLE <span id="gateway-table-id"></span> ğŸ‰</div>
    <div id="loyalty-display" style="display:none;" class="loyalty-card">
        <div class="loyalty-header">
            <span class="gold-label">OVEN X CLUB</span>
            <span id="club-member-name" style="color:white; font-weight:900;"></span>
        </div>
        <div class="stamp-grid-container">
            <div class="stamp-row" id="stamp-row-1"></div>
            <div class="stamp-row" id="stamp-row-2"></div>
        </div>
        <p id="loyalty-msg" class="loyalty-footer"></p>
    </div>
    <button id="join-club-btn" onclick="openLoyaltySetup()" class="gate-btn btn-gold btn-3d">ğŸ‘‘ Join Oven X Club & Win Free Meals!</button>
    <div class="gateway-options">
        <button class="gate-btn btn-3d btn-orange" onclick="enterApp('deals')">ğŸ”¥ Best Deals!</button>
        <button class="gate-btn btn-3d btn-red" onclick="enterApp('menu')">ğŸ“– Full Menu</button>
        <button class="gate-btn btn-3d btn-outline" onclick="openAdminLogin()">ğŸ‘¨â€ğŸ³ KITCHEN PANEL</button>
    </div>
</div>

<div id="top-sticky-container">
    <header id="main-header">
        <button class="header-back-btn btn-3d" onclick="exitToGateway()">â† HOME</button>
        <p class="logo">OVEN <span>X</span> <br><small id="header-table-indicator" style="font-size:10px; font-weight:bold;"></small></p>
        <div style="width:60px;"></div>
    </header>
    <div class="tab-bar" id="nav-tabs">
        <div class="tab-item active" id="tab-menu" onclick="switchTab('menu')">FULL MENU</div>
        <div class="tab-item" id="tab-deals" onclick="switchTab('deals')">HOT DEALS</div>
    </div>
    <div class="menu-controls" id="menu-controls">
        <div class="search-box-wrap">
            <input type="text" id="menuSearch" class="search-input" placeholder="ğŸ” Search food..." oninput="handleSearch(this.value)">
        </div>
        <div class="category-scroller" id="category-bar"></div>
    </div>
</div>

<div id="deals-container" class="deals-container"><div id="deals-list"></div></div>
<div class="container" id="menu-container" style="display:none;"></div>

<div id="cart-bar">
    <div><span id="cart-count" style="font-size:11px; font-weight:900; color:var(--orange);">ITEMS: 0</span><br><span id="cart-total" style="font-size:20px; font-weight:900;">Rs 0</span></div>
    <div class="checkout-btn btn-3d" onclick="startCheckout()">CHECKOUT â†’</div>
</div>

<div id="ai-chat-bubble" onclick="toggleAIChat()">ğŸ¤–</div>
<div id="ai-chat-window">
    <div style="background: var(--red); color: white; padding: 15px; font-weight: 900; display: flex; justify-content: space-between; align-items: center;">
        <span>OVEN X MASTER AI</span>
        <span onclick="toggleAIChat()" style="cursor:pointer; font-size: 20px;">Ã—</span>
    </div>
    <div id="ai-msg-container"></div>
    <div class="ai-input-wrap">
        <input type="text" id="ai-input-box" placeholder="Ask anything..." onkeypress="if(event.key==='Enter') sendToAI()">
        <button onclick="sendToAI()" style="background: var(--orange); border: none; color: white; width: 45px; height: 45px; border-radius: 50%; font-weight: bold; cursor: pointer;">â”</button>
    </div>
</div>

<div id="manual-order-overlay"><div class="modal"><h2 style="color:var(--red); font-weight:900;">Manual Order ğŸ“</h2><select id="man-type" class="big-input"><option value="Dine-In">Dine-In</option><option value="Takeaway">Takeaway</option><option value="Delivery">Delivery</option></select><input type="text" id="man-loc" placeholder="Table # or Address" class="big-input"><textarea id="man-items" placeholder="Items List" class="big-input"></textarea><div style="display:flex; gap:10px;"><input type="number" id="man-sub" placeholder="Subtotal" class="big-input"><input type="number" id="man-fee" placeholder="Del. Fee" class="big-input"></div><button class="confirm-btn btn-3d" style="background:var(--red);" onclick="saveManualOrder()">SAVE TO KITCHEN</button><button onclick="closeModals()" style="margin-top:15px;">CANCEL</button></div></div>
<div id="loyalty-setup-overlay"><div class="modal modal-gold"><h2 class="gold-label">ACTIVATE CLUB CARD ğŸ‘‘</h2><input type="text" id="clubName" placeholder="Full Name" class="premium-input"><input type="number" id="clubPhone" placeholder="WhatsApp Number" class="premium-input"><button class="gate-btn btn-gold btn-3d" style="width:100%; margin-top:20px;" onclick="saveClubProfile()">ACTIVATE NOW ğŸš€</button></div></div>
<div id="admin-login-overlay"><div class="modal"><h2>Kitchen Access</h2><input type="text" id="adminPassword" placeholder="Secret Code" class="big-input" oninput="handlePassInput(this)"><button class="next-btn btn-3d" style="background:var(--red); margin-top:20px;" onclick="verifyAdmin()">UNLOCK</button></div></div>
<div id="kitchen-panel-overlay"><div class="kitchen-modal"><div class="kitchen-header"><h2>LIVE KITCHEN</h2><div><button onclick="downloadCustomerData()">DB ğŸ“¥</button><button onclick="openManualOrderModal()">â•</button><button onclick="closeKitchenPanel()">EXIT</button></div></div><div style="display:flex; gap:10px; padding:10px;"><div class="k-tab active" onclick="setKitchenFilter('ALL')">ALL</div><div class="k-tab" onclick="setKitchenFilter('DELIVERY')">DELIVERY</div></div><div class="kitchen-content-wrapper"><div id="kitchen-orders-list"></div><div id="rider-audit-sidebar"><h3>Rider Audit</h3><div id="rider-audit-selection"></div><div id="audit-result-box" class="audit-card"></div></div></div></div></div>
<div id="flavor-overlay"><div class="modal"><h3 id="flavor-title">Flavor</h3><div class="grid" id="flavor-grid"></div></div></div>
<div id="welcome-overlay"><div class="modal"><h2>Where to?</h2><div id="service-options-container"></div></div></div>
<div id="modal-overlay"><div class="modal"><h3 id="modal-item-name"></h3><div class="qty-btns"><button class="qty-btn" onclick="setQty(1)">1</button><button class="qty-btn active" onclick="setQty(5)">5+</button></div><textarea id="special-note" placeholder="Notes?"></textarea><button onclick="addToCartFinal()" class="confirm-btn">ADD</button></div></div>
<div id="size-overlay"><div class="modal"><h3>Select Size</h3><div class="grid" id="size-grid"></div></div></div>
<div id="overlay-screen"><button onclick="handleBack()" class="header-back-btn">â† BACK</button><div id="checkout-content"></div></div>
<div id="tracking-overlay"><div class="modal"><span id="track-icon" class="tracking-status-icon">ğŸ“©</span><h2 id="track-main-status">Sent!</h2><div id="step-waiting" class="tracking-step active">Sent</div><div id="step-preparing" class="tracking-step">Prep</div><div id="step-ready" class="tracking-step">Ready</div><button onclick="clearTracking()">CLOSE</button></div></div>
<div id="upsell-overlay"><div class="modal"><span id="upsell-icon">ğŸŸ</span><h2 id="upsell-title">HUNGRY?</h2><p id="upsell-desc"></p><button id="upsell-yes-btn" class="confirm-btn">YES</button></div></div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="script.js"></script>
</body>
</html>
